module.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(t){return e[t]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=36)}([function(e,t,n){const r=n(22),o=n(14),i=n(15),s=n(6).parse,a=e=>(global.hosts||{})[e]||e,c=(e,t)=>("https:"===((void 0===t?global.proxy:t)||e).protocol?i:o).request,u=(e,t,n,r)=>{n=n||{},r=void 0===r?global.proxy:r,"content-length"in n&&delete n["content-length"];const o={};return o._headers=n,r&&"https:"===t.protocol?(o.method="CONNECT",o.headers=Object.keys(n).reduce((e,t)=>Object.assign(e,["host","user-agent"].includes(t)&&{[t]:n[t]}),{})):(o.method=e,o.headers=n),r?(o.hostname=a(r.hostname),o.port=r.port||("https:"===r.protocol?443:80),o.path="https:"===t.protocol?a(t.hostname)+":"+(t.port||443):"http://"+a(t.hostname)+t.path):(o.hostname=a(t.hostname),o.port=t.port||("https:"===t.protocol?443:80),o.path=t.path),o},A=(e,t,n,r,o)=>{t=s(t),n=n||{};const a=u(e,t,Object.assign({host:t.hostname,accept:"application/json, text/plain, */*","accept-encoding":"gzip, deflate","accept-language":"zh-CN,zh;q=0.9","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.181 Safari/537.36"},n),o);return new Promise((n,s)=>{c(t,o)(a).on("response",e=>n(e)).on("connect",(o,c)=>i.request({method:e,path:t.path,headers:a._headers,socket:c,agent:!1}).on("response",e=>n(e)).on("error",e=>s(e)).end(r)).on("error",e=>s(e)).end("CONNECT"===a.method.toUpperCase()?void 0:r)}).then(i=>new Set([201,301,302,303,307,308]).has(i.statusCode)?A(e,t.resolve(i.headers.location||t.href),(delete n.host,n),r,o):Object.assign(i,{url:t,body:e=>h(i,e),json:()=>l(i),jsonp:()=>p(i)}))},h=(e,t)=>new Promise((t,n)=>{const r=[];e.on("data",e=>r.push(e)).on("end",()=>t(Buffer.concat(r))).on("error",e=>n(e))}).then(n=>(n=n.length&&["gzip","deflate"].includes(e.headers["content-encoding"])?r.unzipSync(n):n,t?n:n.toString())),l=e=>h(e,!1).then(e=>JSON.parse(e)),p=e=>h(e,!1).then(e=>JSON.parse(e.slice(e.indexOf("(")+1,-1)));A.read=h,A.create=c,A.translate=a,A.configure=u,e.exports=A},function(e){const t=(e,n)=>setTimeout(()=>{let r=!1;Object.keys(e.cache||{}).forEach(t=>{e.cache[t]&&(e.cache[t].expiration<Date.now()?e.cache[t]=null:r=r||!0)}),r?t(e,n):e.collector=null},n);e.exports=(e,n,r=18e5)=>{const o=e.cache?e.cache:e.cache={};e.collector||(e.collector=t(e,r/2));const i=null==n?"default":"object"==typeof n?n.id||n.key||JSON.stringify(n):n,s=(e,t)=>o[i].execution=Promise[e](t);return(!o[i]||o[i].expiration<Date.now())&&(o[i]={expiration:Date.now()+r,execution:e(n).then(e=>s("resolve",e)).catch(e=>s("reject",e))}),o[i].execution}},function(e){e.exports=require("electron")},function(e,t,n){"use strict";const r=n(10),o=n(6).parse,i=n(13).stringify,s="e82ckenh8dichen8",a="rFgB&h#%2?^eDg:Q",c=(e,t)=>{const n=r.createDecipheriv("aes-128-ecb",t,"");return Buffer.concat([n.update(e),n.final()])},u=(e,t)=>{const n=r.createCipheriv("aes-128-ecb",t,"");return Buffer.concat([n.update(e),n.final()])};e.exports={eapi:{encrypt:e=>u(e,s),decrypt:e=>c(e,s),encryptRequest:(t,n)=>{t=o(t);const s=JSON.stringify(n),a=`nobody${t.path}use${s}md5forencrypt`,c=r.createHash("md5").update(a).digest("hex"),u=`${t.path}-36cd479b6b5-${s}-36cd479b6b5-${c}`;return{url:t.href.replace(/\w*api/,"eapi"),body:i({params:e.exports.eapi.encrypt(Buffer.from(u)).toString("hex").toUpperCase()})}}},linuxapi:{encrypt:e=>u(e,a),decrypt:e=>c(e,a),encryptRequest:(t,n)=>{t=o(t);const r=JSON.stringify({method:"POST",url:t.href,params:n});return{url:t.resolve("/api/linux/forward"),body:i({eparams:e.exports.linuxapi.encrypt(Buffer.from(r)).toString("hex").toUpperCase()})}}},miguapi:{encryptBody:e=>{const t=JSON.stringify(e),n=Buffer.from(r.randomBytes(32).toString("hex")),o=r.randomBytes(8),s=((e,t,n,o)=>{t=t||Buffer.alloc(0);const i=Math.ceil(5),s=Buffer.concat(Array(i).fill(null).reduce(n=>n.concat(r.createHash("md5").update(Buffer.concat([n.slice(-1)[0],e,t])).digest()),[Buffer.alloc(0)]));return{key:s.slice(0,32),iv:s.slice(32,48)}})(n,o),a=r.createCipheriv("aes-256-cbc",s.key,s.iv);return i({data:Buffer.concat([Buffer.from("Salted__"),o,a.update(Buffer.from(t)),a.final()]).toString("base64"),secKey:r.publicEncrypt({key:"-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC8asrfSaoOb4je+DSmKdriQJKWVJ2oDZrs3wi5W67m3LwTB9QVR+cE3XWU21Nx+YBxS0yun8wDcjgQvYt625ZCcgin2ro/eOkNyUOTBIbuj9CvMnhUYiR61lC1f1IGbrSYYimqBVSjpifVufxtx/I3exReZosTByYp4Xwpb1+WAQIDAQAB\n-----END PUBLIC KEY-----",padding:r.constants.RSA_PKCS1_PADDING},n).toString("base64")})}},base64:{encode:(e,t)=>Buffer.from(e,t).toString("base64").replace(/\+/g,"-").replace(/\//g,"_"),decode:(e,t)=>Buffer.from(e.replace(/-/g,"+").replace(/_/g,"/"),"base64").toString(t)},uri:{retrieve:e=>{e=e.toString().trim();const t="3go8&$8*3*3h0k(2)2",n=Array.from(Array(e.length).keys()).map(n=>String.fromCharCode(e.charCodeAt(n)^t.charCodeAt(n%t.length))).join("");return`http://p1.music.126.net/${r.createHash("md5").update(n).digest("base64").replace(/\//g,"_").replace(/\+/g,"-")}/${e}`}},md5:{digest:e=>r.createHash("md5").update(e).digest("hex"),pipe:e=>new Promise((t,n)=>{const o=r.createHash("md5").setEncoding("hex");e.pipe(o).on("error",e=>n(e)).once("finish",()=>t(o.read()))})}};try{e.exports.kuwoapi=n(20)}catch(t){}},function(e,t,n){n(0);e.exports=()=>{const t=new Proxy(()=>{},{get:(e,n)=>(e.route=(e.route||[]).concat(n),t),apply:(t,n,r)=>(e.exports.disable,Promise.reject())});return t}},function(e){e.exports=e=>e[0],e.exports.ENABLE_FLAC="true"===(process.env.ENABLE_FLAC||"").toLowerCase()},function(e){e.exports=require("url")},function(e){e.exports=require("fs")},function(e){e.exports=require("path")},function(e){e.exports=require("child_process")},function(e){e.exports=require("crypto")},function(e){e.exports=require("net")},function(e,t,n){const r=n(1),o=n(6).parse,i=n(3),s=n(0),a=n(23),c=n(13),u={request:{before:()=>{},after:()=>{}},connect:{before:()=>{}},negotiate:{before:()=>{}},target:{host:new Set,path:new Set}};u.target.host=new Set(["music.163.com","interface.music.163.com","interface3.music.163.com","apm.music.163.com","apm3.music.163.com"]),u.target.path=new Set(["/api/v3/playlist/detail","/api/v3/song/detail","/api/v6/playlist/detail","/api/album/play","/api/artist/privilege","/api/album/privilege","/api/v1/artist","/api/v1/artist/songs","/api/artist/top/song","/api/v1/album","/api/album/v3/detail","/api/playlist/privilege","/api/song/enhance/player/url","/api/song/enhance/player/url/v1","/api/song/enhance/download/url","/api/song/enhance/privilege","/batch","/api/batch","/api/v1/search/get","/api/v1/search/song/get","/api/search/complex/get","/api/cloudsearch/pc","/api/v1/playlist/manipulate/tracks","/api/song/like","/api/v1/play/record","/api/playlist/v4/detail","/api/v1/radio/get","/api/v1/discovery/recommend/songs"]);const A=["music.163.com","music.126.net","iplay.163.com","look.163.com","y.163.com"];u.request.before=e=>{const{req:t}=e;t.url=(t.url.startsWith("http://")?"":(t.socket.encrypted?"https:":"http:")+"//"+(A.some(e=>(t.headers.host||"").endsWith(e))?t.headers.host:null))+t.url;const n=o(t.url);if([n.hostname,t.headers.host].some(e=>e.includes("music.163.com"))&&(e.decision="proxy"),[n.hostname,t.headers.host].some(e=>u.target.host.has(e))&&"POST"==t.method&&("/api/linux/forward"==n.path||n.path.startsWith("/eapi/")))return s.read(t).then(e=>t.body=e).then(r=>{if("x-napm-retry"in t.headers&&delete t.headers["x-napm-retry"],t.headers["X-Real-IP"]="118.88.88.88",!t.url.includes("stream")&&r){let t=null;const s={};if(s.pad=(r.match(/%0+$/)||[""])[0],s.forward="/api/linux/forward"==n.path,s.forward?(t=JSON.parse(i.linuxapi.decrypt(Buffer.from(r.slice(8,r.length-s.pad.length),"hex")).toString()),s.path=o(t.url).path,s.param=t.params):(t=i.eapi.decrypt(Buffer.from(r.slice(7,r.length-s.pad.length),"hex")).toString().split("-36cd479b6b5-"),s.path=t[0],s.param=JSON.parse(t[1])),s.path=s.path.replace(/\/\d*$/,""),e.netease=s,"/api/song/enhance/download/url"==s.path)return h(e)}}).catch(e=>console.log(e,t.url));if(u.target.host.has(n.hostname)&&(n.path.startsWith("/weapi/")||n.path.startsWith("/api/")))t.headers["X-Real-IP"]="118.88.88.88",e.netease={web:!0,path:n.path.replace(/^\/weapi\//,"/api/").replace(/\?.+$/,"").replace(/\/\d*$/,"")};else if(t.url.includes("package"))try{const n=t.url.split("package/").pop().split("/"),r=o(i.base64.decode(n[0])),s=n[1].replace(/\.\w+/,"");t.url=r.href,t.headers.host=r.hostname,t.headers.cookie=null,e.package={id:s},e.decision="proxy"}catch(t){e.error=t,e.decision="close"}},u.request.after=e=>{const{req:t,proxyRes:n,netease:r,packageRename:a}=e;if("tyst.migu.cn"===t.headers.host&&n.headers["content-range"]&&200===n.statusCode&&(n.statusCode=206),r&&u.target.path.has(r.path)&&200==n.statusCode)return s.read(n,!0).then(e=>e.length?n.body=e:Promise.reject()).then(t=>{const n=e=>e.replace(/([^\\]"\s*:\s*)(\d{16,})(\s*[}|,])/g,'$1"$2L"$3');try{r.encrypted=!1,r.jsonBody=JSON.parse(n(t.toString()))}catch(e){r.encrypted=!0,r.jsonBody=JSON.parse(n(i.eapi.decrypt(t).toString()))}if(new Set([401,512]).has(r.jsonBody.code)&&!r.web){if(r.path.includes("manipulate"))return l(e);if("/api/song/like"==r.path)return p(e)}else if(r.path.includes("url"))return f(e)}).then(()=>{["transfer-encoding","content-encoding","content-length"].filter(e=>e in n.headers).forEach(e=>delete n.headers[e]);let e=JSON.stringify(r.jsonBody,(e,t)=>("object"==typeof t&&null!=t&&("fee"in t&&(t.fee=0),"st"in t&&"pl"in t&&"dl"in t&&"subp"in t&&(t.st=0,t.subp=1,t.pl=0==t.pl?32e4:t.pl,t.dl=0==t.dl?32e4:t.dl)),t));e=e.replace(/([^\\]"\s*:\s*)"(\d{16,})L"(\s*[}|,])/g,"$1$2$3"),n.body=r.encrypted?i.eapi.encrypt(Buffer.from(e)):e}).catch(e=>e?console.log(e,t.url):null);if(a){if(new Set([201,301,302,303,307,308]).has(n.statusCode))return s(t.method,o(t.url).resolve(n.headers.location),t.headers).then(t=>e.proxyRes=t);/p\d+c*.music.126.net/.test(t.url)&&(n.headers["content-type"]="audio/*")}},u.connect.before=e=>{const{req:t}=e,n=o("https://"+t.url);[n.hostname,t.headers.host].some(e=>u.target.host.has(e))?80==n.port?(t.url=`${global.address||"localhost"}:${global.port[0]}`,t.local=!0):global.port[1]?(t.url=`${global.address||"localhost"}:${global.port[1]}`,t.local=!0):e.decision="blank":n.href.includes(global.endpoint)&&(e.decision="proxy")},u.negotiate.before=e=>{const{req:t,socket:n,decision:r}=e,i=o("https://"+t.url),s=u.target.host;t.local||r||s.has(n.sni)&&!s.has(i.hostname)&&(s.add(i.hostname),e.decision="blank")};const h=e=>{const{req:t,netease:n}=e,r="http://music.163.com/api/song/enhance/player/url";let o=null;if(n.forward){const{id:e,br:t}=n.param;n.param={ids:`["${e}"]`,br:t},o=i.linuxapi.encryptRequest(r,n.param)}else{const{id:e,br:t,e_r:s,header:a}=n.param;n.param={ids:`["${e}"]`,br:t,e_r:s,header:a},o=i.eapi.encryptRequest(r,n.param)}t.url=o.url,t.body=o.body+n.pad},l=e=>{const{req:t,netease:n}=e,{trackIds:r,pid:o,op:i}=n.param,a=(Array.isArray(r)?r:JSON.parse(r))[0];return s("POST","http://music.163.com/api/playlist/manipulate/tracks",t.headers,`trackIds=[${a},${a}]&pid=${o}&op=${i}`).then(e=>e.json()).then(e=>{n.jsonBody=e}).catch(()=>{})},p=e=>{const{req:t,netease:n}=e,{trackId:r}=n.param;let o=0,i=0;return s("GET","http://music.163.com/api/v1/user/info",t.headers).then(e=>e.json()).then(e=>(i=e.userPoint.userId,s("GET",`http://music.163.com/api/user/playlist?uid=${i}&limit=1`,t.headers).then(e=>e.json()))).then(e=>(o=e.playlist[0].id,s("POST","http://music.163.com/api/playlist/manipulate/tracks",t.headers,`trackIds=[${r},${r}]&pid=${o}&op=add`).then(e=>e.json()))).then(e=>{new Set([200,502]).has(e.code)&&(n.jsonBody={code:200,playlistId:o})}).catch(()=>{})},d=e=>s("GET",e.url).then(e=>i.md5.pipe(e)),f=e=>{const{req:t,netease:n}=e,{jsonBody:o}=n;let s=[],u=0;const A=e=>(e.flag=0,200==e.code&&!e.freeTrialInfo||0!=u&&e.id!=u?void(200==e.code&&n.web&&(e.url=e.url.replace(/(m\d+?)(?!c)\.music\.126\.net/,"$1c.music.126.net"))):a(e.id).then(t=>(e.type=999e3===t.br?"flac":"mp3",e.url=global.endpoint?`${global.endpoint}/package/${i.base64.encode(t.url)}/${e.id}.${e.type}`:t.url,e.md5=t.md5||i.md5.digest(t.url),e.br=t.br||128e3,e.size=t.size,e.code=200,e.freeTrialInfo=null,t)).then(o=>{if(n.path.includes("download")&&!o.md5){const i=(e,t)=>{const n=Array.from([e,t]).map(e=>e.split(".").slice(0,3).map(e=>parseInt(e)||0)).reduce((e,t)=>e.length?e.map((e,n)=>e.concat(t[n])):t.map(e=>[e]),[]).filter(e=>e[0]!=e[1])[0];return!n||n[0]<=n[1]},s={android:"0.0.0",osx:"0.0.0"},a={key:o.url.replace(/\?.*$/,"").replace(/(?<=kugou\.com\/)\w+\/\w+\//,"").replace(/(?<=kuwo\.cn\/)\w+\/\w+\/resource\//,""),url:o.url};try{let{header:o}=n.param;o="string"==typeof o?JSON.parse(o):o;const u=c.parse(t.headers.cookie.replace(/\s/g,""),";"),A=o.os||u.os,h=o.appver||u.appver;if(A in s&&i(s[A],h))return r(d,a,6048e5).then(t=>e.md5=t)}catch(e){}}}).catch(()=>{}));return Array.isArray(o.data)?n.path.includes("download")?(o.data=o.data[0],s=[A(o.data)]):(u=n.web?0:parseInt(((Array.isArray(n.param.ids)?n.param.ids:JSON.parse(n.param.ids))[0]||0).toString().replace("_0","")),s=o.data.map(e=>A(e))):s=[A(o.data)],Promise.all(s).catch(()=>{})};e.exports=u},function(e){e.exports=require("querystring")},function(e){e.exports=require("http")},function(e){e.exports=require("https")},function(e){e.exports=require("dns")},function(e,t,n){function r(e,t){var n=h.process.platform;return"darwin"===n?function(e,t){var n=h.os.tmpdir();return n?h.process.env.USER?void u(e,(function(r,o){function u(n,r,o){c(h.path.dirname(e.path),(function(e){return n?t(n):e?t(e):void t(void 0,r,o)}))}return r?t(r):(e.uuid=o,e.path=h.path.join(n,e.uuid,e.options.name+".app"),void i(e,(function(t,n,r){return t?u(t,n,r):void function(e,t){e.options.icns?h.fs.readFile(e.options.icns,(function(n,r){if(n)return t(n);var o=h.path.join(e.path,"Contents","Resources","applet.icns");h.fs.writeFile(o,r,t)})):t()}(e,(function(t){return t?u(t):void a(e,(function(t,n,r){return t?u(t,n,r):void s(e,(function(t){return t?u(t):void function(e,t){var n=h.path.join(e.path,"Contents","MacOS","applet"),r={cwd:h.path.dirname(n),encoding:"utf-8"};h.child.exec("./"+h.path.basename(n),r,t)}(e,(function(t,n,r){return t?u(t,n,r):void function(e,t){var n=h.path.join(e.path,"Contents","MacOS");h.fs.readFile(h.path.join(n,"code"),"utf-8",(function(r,o){if(r){if("ENOENT"===r.code)return t(new Error(p));t(r)}else h.fs.readFile(h.path.join(n,"stdout"),"utf-8",(function(r,i){return r?t(r):void h.fs.readFile(h.path.join(n,"stderr"),"utf-8",(function(n,r){return n?t(n):void(0===(o=parseInt(o.trim(),10))?t(void 0,i,r):(n=new Error("Command failed: "+e.command+"\n"+r),n.code=o,t(n,i,r)))}))}))}))}(e,u)}))}))}))}))})))})):t(new Error("env['USER'] not defined.")):t(new Error("os.tmpdir() not defined."))}(e,t):"linux"===n?function(e,t){!function(e,t){var n=0,r=["/usr/bin/kdesudo","/usr/bin/pkexec"];!function e(){if(n===r.length)return t(new Error("Unable to find pkexec or kdesudo."));var o=r[n++];h.fs.stat(o,(function(n){if(n){if("ENOTDIR"===n.code)return e();if("ENOENT"===n.code)return e();t(n)}else t(void 0,o)}))}()}(0,(function(n,r){if(n)return t(n);var i=['cd "'+o(h.process.cwd())+'";'];for(var s in e.options.env){var a=e.options.env[s];i.push("export "+s+'="'+o(a)+'";')}i.push('"'+o(r)+'"'),/kdesudo/i.test(r)?(i.push("--comment",'"'+e.options.name+' wants to make changes. Enter your password to allow this."'),i.push("-d"),i.push("--")):/pkexec/i.test(r)&&i.push("--disable-internal-agent");var c="SUDOPROMPT\n";i.push('/bin/bash -c "echo '+o(c.trim())+"; "+o(e.command)+'"'),i=i.join(" "),h.child.exec(i,{encoding:"utf-8",maxBuffer:f},(function(e,n,r){var o=n&&n.slice(0,c.length)===c;o&&(n=n.slice(c.length)),e&&!o&&(/No authentication agent found/.test(r)?e.message=d:e.message=p),t(e,n,r)}))}))}(e,t):"win32"===n?function(e,t){var n=h.os.tmpdir();return n?void u(e,(function(r,o){return r?t(r):(e.uuid=o,e.path=h.path.join(n,e.uuid),/"/.test(e.path)?t(new Error("instance.path cannot contain double-quotes.")):(e.pathElevate=h.path.join(e.path,"elevate.vbs"),e.pathExecute=h.path.join(e.path,"execute.bat"),e.pathCommand=h.path.join(e.path,"command.bat"),e.pathStdout=h.path.join(e.path,"stdout"),e.pathStderr=h.path.join(e.path,"stderr"),e.pathStatus=h.path.join(e.path,"status"),void h.fs.mkdir(e.path,(function(n){function r(n,r,o){c(e.path,(function(e){return n?t(n):e?t(e):void t(void 0,r,o)}))}return n?t(n):void function(e,t){var n=[];n.push("@echo off"),n.push('call "'+e.pathCommand+'" > "'+e.pathStdout+'" 2> "'+e.pathStderr+'"'),n.push('(echo %ERRORLEVEL%) > "'+e.pathStatus+'"'),n=n.join("\r\n"),h.fs.writeFile(e.pathExecute,n,"utf-8",t)}(e,(function(t){return t?r(t):void function(e,t){var n=h.process.cwd();if(/"/.test(n))return t(new Error("process.cwd() cannot contain double-quotes."));var r=["@echo off","chcp 65001>nul",'cd /d "'+n+'"'];for(var o in e.options.env){var i=e.options.env[o];r.push("set "+o+"="+i.replace(/([<>\\|&^])/g,"^$1"))}r.push(e.command),r=r.join("\r\n"),h.fs.writeFile(e.pathCommand,r,"utf-8",t)}(e,(function(t){return t?r(t):void function(e,t){var n=[];n.push("powershell.exe"),n.push("Start-Process"),n.push("-FilePath"),n.push("\"'"+e.pathExecute.replace(/'/g,"`'")+"'\""),n.push("-WindowStyle hidden"),n.push("-Verb runAs"),n=n.join(" "),h.child.exec(n,{encoding:"utf-8"},(function(e,n,r){return e?t(new Error(p),n,r):void t()})).stdin.end()}(e,(function(t,n,o){return t?r(t,n,o):void function e(t,n){h.fs.stat(t.pathStatus,(function(r,o){r&&"ENOENT"===r.code||2>o.size?setTimeout((function(){h.fs.stat(t.pathStdout,(function(r){return r?n(new Error(p)):void e(t,n)}))}),1e3):r?n(r):n()}))}(e,(function(t){return t?r(t):void function(e,t){h.fs.readFile(e.pathStatus,"utf-8",(function(n,r){return n?t(n):void h.fs.readFile(e.pathStdout,"utf-8",(function(n,o){return n?t(n):void h.fs.readFile(e.pathStderr,"utf-8",(function(n,i){return n?t(n):void(0===(r=parseInt(r.trim(),10))?t(void 0,o,i):(n=new Error("Command failed: "+e.command+"\r\n"+i),n.code=r,t(n,o,i)))}))}))}))}(e,r)}))}))}))}))}))))})):t(new Error("os.tmpdir() not defined."))}(e,t):void t(new Error("Platform not yet supported."))}function o(e){if("string"!=typeof e)throw new Error("Expected a string.");return e.replace(/"/g,'\\"')}function i(e,t){var n=h.path.dirname(e.path);h.fs.mkdir(n,(function(r){if(r)return t(r);var i=h.path.join(n,"sudo-prompt-applet.zip");h.fs.writeFile(i,l,"base64",(function(n){if(n)return t(n);var r=[];r.push("/usr/bin/unzip"),r.push("-o"),r.push('"'+o(i)+'"'),r.push('-d "'+o(e.path)+'"'),r=r.join(" "),h.child.exec(r,{encoding:"utf-8"},t)}))}))}function s(e,t){var n=h.path.join(e.path,"Contents","MacOS","sudo-prompt-command"),r=[];for(var i in r.push('cd "'+o(h.process.cwd())+'"'),e.options.env){var s=e.options.env[i];r.push("export "+i+'="'+o(s)+'"')}r.push(e.command),r=r.join("\n"),h.fs.writeFile(n,r,"utf-8",t)}function a(e,t){var n=o(h.path.join(e.path,"Contents","Info.plist")),r=o("CFBundleName"),i=e.options.name+" Password Prompt";if(/'/.test(i))return t(new Error("Value should not contain single quotes."));var s=[];s.push("/usr/bin/defaults"),s.push("write"),s.push('"'+n+'"'),s.push('"'+r+'"'),s.push("'"+i+"'"),s=s.join(" "),h.child.exec(s,{encoding:"utf-8"},t)}function c(e,t){if("string"!=typeof e||!e.trim())return t(new Error("Argument path not defined."));var n=[];if("win32"===h.process.platform){if(/"/.test(e))return t(new Error("Argument path cannot contain double-quotes."));n.push('rmdir /s /q "'+e+'"')}else n.push("/bin/rm"),n.push("-rf"),n.push('"'+o(h.path.normalize(e))+'"');n=n.join(" "),h.child.exec(n,{encoding:"utf-8"},t)}function u(e,t){h.crypto.randomBytes(256,(function(n,r){n&&(r=Date.now()+""+Math.random());var o=h.crypto.createHash("SHA256");o.update("sudo-prompt-3"),o.update(e.options.name),o.update(e.command),o.update(r);var i=o.digest("hex").slice(-32);return i&&"string"==typeof i&&32===i.length?void t(void 0,i):t(new Error("Expected a valid UUID."))}))}function A(e){return!(!/^[a-z0-9 ]+$/i.test(e)||0===e.trim().length||70<e.length)}var h={child:n(9),crypto:n(10),fs:n(7),os:n(18),path:n(8),process:process,util:n(19)};e.exports.exec=function(){if(1>arguments.length||3<arguments.length)throw new Error("Wrong number of arguments.");var e=arguments[0],t={},n=function(){};if("string"!=typeof e)throw new Error("Command should be a string.");if(2===arguments.length)if(h.util.isObject(arguments[1]))t=arguments[1];else{if(!h.util.isFunction(arguments[1]))throw new Error("Expected options or callback.");n=arguments[1]}else if(3===arguments.length){if(!h.util.isObject(arguments[1]))throw new Error("Expected options to be an object.");if(t=arguments[1],!h.util.isFunction(arguments[2]))throw new Error("Expected callback to be a function.");n=arguments[2]}if(/^sudo/i.test(e))return n(new Error('Command should not be prefixed with "sudo".'));if(void 0===t.name){var o=h.process.title;if(!A(o))return n(new Error("process.title cannot be used as a valid name."));t.name=o}else if(!A(t.name)){var i="";return i+="options.name must be alphanumeric only ",i+="(spaces are allowed) and <= 70 characters.",n(new Error(i))}if(void 0!==t.icns){if("string"!=typeof t.icns)return n(new Error("options.icns must be a string if provided."));if(0===t.icns.trim().length)return n(new Error("options.icns must not be empty if provided."))}if(void 0!==t.env){if("object"!=typeof t.env)return n(new Error("options.env must be an object if provided."));if(0===Object.keys(t.env).length)return n(new Error("options.env must not be empty if provided."));for(var s in t.env){var a=t.env[s];if("string"!=typeof s||"string"!=typeof a)return n(new Error("options.env environment variables must be strings."));if(!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(s))return n(new Error("options.env has an invalid environment variable name: "+JSON.stringify(s)));if(/[\r\n]/.test(a))return n(new Error("options.env has an invalid environment variable value: "+JSON.stringify(a)))}}var c=h.process.platform;if("darwin"!==c&&"linux"!==c&&"win32"!==c)return n(new Error("Platform not yet supported."));var u={command:e,options:t,uuid:void 0,path:void 0};r(u,n)};var l="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",p="User did not grant permission.",d="No polkit authentication agent found.",f=134217728},function(e){e.exports=require("os")},function(e){e.exports=require("util")},function(e,t,n){var r=Math.floor;const o="function"==typeof BigInt?e=>({low:+(e=BigInt(e)),valueOf:()=>e.valueOf(),toString:()=>e.toString(),not:()=>o(~e),isNegative:()=>0>e,or:t=>o(e|BigInt(t)),and:t=>o(e&BigInt(t)),xor:t=>o(e^BigInt(t)),equals:t=>e===BigInt(t),multiply:t=>o(e*BigInt(t)),shiftLeft:t=>o(e<<BigInt(t)),shiftRight:t=>o(e>>BigInt(t))}):(...e)=>new(n(21))(...e),i=e=>Array.from(Array(e).keys()),s=(...e)=>e.map(e=>-1===e?o(-1,-1):o(e)),a=s(31,0,1,2,3,4,-1,-1,3,4,5,6,7,8,-1,-1,7,8,9,10,11,12,-1,-1,11,12,13,14,15,16,-1,-1,15,16,17,18,19,20,-1,-1,19,20,21,22,23,24,-1,-1,23,24,25,26,27,28,-1,-1,27,28,29,30,31,30,-1,-1),c=s(57,49,41,33,25,17,9,1,59,51,43,35,27,19,11,3,61,53,45,37,29,21,13,5,63,55,47,39,31,23,15,7,56,48,40,32,24,16,8,0,58,50,42,34,26,18,10,2,60,52,44,36,28,20,12,4,62,54,46,38,30,22,14,6),u=s(39,7,47,15,55,23,63,31,38,6,46,14,54,22,62,30,37,5,45,13,53,21,61,29,36,4,44,12,52,20,60,28,35,3,43,11,51,19,59,27,34,2,42,10,50,18,58,26,33,1,41,9,49,17,57,25,32,0,40,8,48,16,56,24),A=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1],h=s(0,1048577,3145731),l=i(64).map(e=>((e,t)=>Array(t).fill().reduce(t=>t.multiply(e),o(1)))(2,e));l[l.length-1]=l[l.length-1].multiply(-1);const p=s(15,6,19,20,28,11,27,16,0,14,22,25,4,17,30,9,1,7,23,13,31,26,2,8,18,12,29,5,21,10,3,24),d=s(56,48,40,32,24,16,8,0,57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,60,52,44,36,28,20,12,4,27,19,11,3),f=s(13,16,10,23,0,4,-1,-1,2,27,14,5,20,9,-1,-1,22,18,11,3,25,7,-1,-1,15,6,26,19,12,1,-1,-1,40,51,30,36,46,54,-1,-1,29,39,50,44,32,47,-1,-1,43,48,38,55,33,52,-1,-1,45,41,49,35,28,31,-1,-1),m=[[14,4,3,15,2,13,5,3,13,14,6,9,11,2,0,5,4,1,10,12,15,6,9,10,1,8,12,7,8,11,7,0,0,15,10,5,14,4,9,10,7,8,12,3,13,1,3,6,15,12,6,11,2,9,5,0,4,2,11,14,1,7,8,13],[15,0,9,5,6,10,12,9,8,7,2,12,3,13,5,2,1,14,7,8,11,4,0,3,14,11,13,6,4,1,10,15,3,13,12,11,15,3,6,0,4,10,1,7,8,4,11,14,13,8,0,6,2,15,9,5,7,1,10,12,14,2,5,9],[10,13,1,11,6,8,11,5,9,4,12,2,15,3,2,14,0,6,13,1,3,15,4,10,14,9,7,12,5,0,8,7,13,1,2,4,3,6,12,11,0,13,5,14,6,8,15,2,7,10,8,15,4,9,11,5,9,0,14,3,10,7,1,12],[7,10,1,15,0,12,11,5,14,9,8,3,9,7,4,8,13,6,2,1,6,11,12,2,3,0,5,14,10,13,15,4,13,3,4,9,6,10,1,12,11,0,2,5,0,13,14,2,8,15,7,4,15,1,10,7,5,6,12,11,3,8,9,14],[2,4,8,15,7,10,13,6,4,1,3,12,11,7,14,0,12,2,5,9,10,13,0,3,1,11,15,5,6,8,9,14,14,11,5,6,4,1,3,10,2,12,15,0,13,2,8,5,11,8,0,15,7,14,9,4,12,7,10,9,1,13,6,3],[12,9,0,7,9,2,14,1,10,15,3,4,6,12,5,11,1,14,13,0,2,8,7,13,15,5,4,10,8,3,11,6,10,4,6,11,7,9,0,6,4,2,13,1,9,15,3,8,15,3,1,14,12,5,11,0,2,12,14,7,5,10,8,13],[4,1,3,10,15,12,5,0,2,11,9,6,8,7,6,9,11,4,12,15,0,3,10,5,14,13,7,8,13,14,1,2,13,6,14,9,4,1,2,14,11,13,5,0,1,10,8,3,0,11,3,5,9,4,15,2,7,8,12,15,10,7,6,12],[13,7,10,0,6,9,5,15,8,4,3,10,11,14,12,5,2,11,9,6,15,12,0,3,4,1,14,13,1,2,7,8,1,2,12,15,10,4,0,3,13,14,6,9,7,8,9,6,15,1,5,12,3,10,14,5,8,7,11,0,4,13,2,11]],g=(e,t,n)=>{let r=o(0);return i(t).forEach(t=>{e[t].isNegative()||n.and(l[e[t].low]).equals(0)||(r=r.or(l[t]))}),r},b=(e,t)=>{let n=o(0),r=o(0);const s=i(8).map(()=>o(0)),A=[o(0),o(0)];let h=o(0),l=o(0);return n=g(c,64,t),A[0]=n.and(4294967295),A[1]=n.and(-4294967296).shiftRight(32),i(16).forEach(t=>{l=o(A[1]),l=g(a,64,l),l=l.xor(e[t]),i(8).forEach(e=>{s[e]=l.shiftRight(8*e).and(255)}),r=o(0),i(8).reverse().forEach(e=>{r=r.shiftLeft(4).or(m[e][s[e]])}),l=g(p,32,r),h=o(A[0]),A[0]=o(A[1]),A[1]=h.xor(l)}),A.reverse(),n=A[1].shiftLeft(32).and(-4294967296).or(A[0].and(4294967295)),n=g(u,64,n),n},w=(e,t,n)=>{let r=g(d,56,e);i(16).forEach(e=>{r=r.and(h[A[e]]).shiftLeft(28-A[e]).or(r.and(h[A[e]].not()).shiftRight(A[e])),t[e]=g(f,64,r)}),1===n&&i(8).forEach(e=>{[t[e],t[15-e]]=[t[15-e],t[e]]})},v=(e,t,n)=>{let s=o(0);i(8).forEach(e=>{s=o(t[e]).shiftLeft(8*e).or(s)});const a=r(e.length/8),c=i(16).map(()=>o(0));w(s,c,n);const u=i(a).map(()=>o(0));i(a).forEach(t=>{i(8).forEach(n=>{u[t]=o(e[n+8*t]).shiftLeft(8*n).or(u[t])})});const A=i(r((1+8*(a+1))/8)).map(()=>o(0));i(a).forEach(e=>{A[e]=b(c,u[e])});const h=e.slice(8*a);let l=o(0);i(e.length%8).forEach(e=>{l=o(h[e]).shiftLeft(8*e).or(l)}),(h.length||0===n)&&(A[a]=b(c,l));const p=i(8*A.length).map(()=>0);let d=0;return A.forEach(e=>{i(8).forEach(t=>{p[d]=e.shiftRight(8*t).and(255).low,d+=1})}),Buffer.from(p)},y=Buffer.from("ylzsxkwm"),E=e=>v(e,y,0);e.exports={encrypt:E,decrypt:e=>v(e,y,1),encryptQuery:e=>E(Buffer.from(e)).toString("base64")}},function(e){function t(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function n(e){return!0===(e&&e.__isLong__)}function r(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&256>e)&&(r=A[e])?r:(n=i(e,0>(0|e)?-1:0,!0),o&&(A[e]=n),n):(o=-128<=(e|=0)&&128>e)&&(r=u[e])?r:(n=i(e,0>e?-1:0,!1),o&&(u[e]=n),n)}function o(e,t){if(isNaN(e))return t?g:m;if(t){if(0>e)return g;if(e>=p)return E}else{if(e<=-d)return B;if(e+1>=d)return y}return 0>e?o(-e,t).neg():i(0|e%l,0|e/l,t)}function i(e,n,r){return new t(e,n,r)}function s(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(n=t,t=!1):t=!!t,2>(n=n||10)||36<n)throw RangeError("radix");var r;if(0<(r=e.indexOf("-")))throw Error("interior hyphen");if(0===r)return s(e.substring(1),t,n).neg();for(var i=o(h(n,8)),a=m,c=0;c<e.length;c+=8){var u=Math.min(8,e.length-c),A=parseInt(e.substring(c,c+u),n);if(8>u){var l=o(h(n,u));a=a.mul(l).add(o(A))}else a=(a=a.mul(i)).add(o(A))}return a.unsigned=t,a}function a(e,t){return"number"==typeof e?o(e,t):"string"==typeof e?s(e,t):i(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}e.exports=t;var c=null;try{c=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0}),t.isLong=n;var u={},A={};t.fromInt=r,t.fromNumber=o,t.fromBits=i;var h=Math.pow;t.fromString=s,t.fromValue=a;var l=4294967296,p=l*l,d=p/2,f=r(16777216),m=r(0);t.ZERO=m;var g=r(0,!0);t.UZERO=g;var b=r(1);t.ONE=b;var w=r(1,!0);t.UONE=w;var v=r(-1);t.NEG_ONE=v;var y=i(-1,2147483647,!1);t.MAX_VALUE=y;var E=i(-1,-1,!0);t.MAX_UNSIGNED_VALUE=E;var B=i(0,-2147483648,!1);t.MIN_VALUE=B;var k=t.prototype;k.toInt=function(){return this.unsigned?this.low>>>0:this.low},k.toNumber=function(){return this.unsigned?(this.high>>>0)*l+(this.low>>>0):this.high*l+(this.low>>>0)},k.toString=function(e){if(2>(e=e||10)||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(B)){var t=o(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=o(h(e,6),this.unsigned),s=this,a="";;){var c=s.div(i),u=(s.sub(c.mul(i)).toInt()>>>0).toString(e);if((s=c).isZero())return u+a;for(;6>u.length;)u="0"+u;a=""+u+a}},k.getHighBits=function(){return this.high},k.getHighBitsUnsigned=function(){return this.high>>>0},k.getLowBits=function(){return this.low},k.getLowBitsUnsigned=function(){return this.low>>>0},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(B)?64:this.neg().getNumBitsAbs();for(var e=0==this.high?this.low:this.high,t=31;0<t&&0==(e&1<<t);t--);return 0==this.high?t+1:t+33},k.isZero=function(){return 0===this.high&&0===this.low},k.eqz=k.isZero,k.isNegative=function(){return!this.unsigned&&0>this.high},k.isPositive=function(){return this.unsigned||0<=this.high},k.isOdd=function(){return 1==(1&this.low)},k.isEven=function(){return 0==(1&this.low)},k.equals=function(e){return n(e)||(e=a(e)),(this.unsigned===e.unsigned||1!=this.high>>>31||1!=e.high>>>31)&&(this.high===e.high&&this.low===e.low)},k.eq=k.equals,k.notEquals=function(e){return!this.eq(e)},k.neq=k.notEquals,k.ne=k.notEquals,k.lessThan=function(e){return 0>this.comp(e)},k.lt=k.lessThan,k.lessThanOrEqual=function(e){return 0>=this.comp(e)},k.lte=k.lessThanOrEqual,k.le=k.lessThanOrEqual,k.greaterThan=function(e){return 0<this.comp(e)},k.gt=k.greaterThan,k.greaterThanOrEqual=function(e){return 0<=this.comp(e)},k.gte=k.greaterThanOrEqual,k.ge=k.greaterThanOrEqual,k.compare=function(e){if(n(e)||(e=a(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(B)?B:this.not().add(b)},k.neg=k.negate,k.add=function(e){n(e)||(e=a(e));var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,s=65535&this.low,c=e.high>>>16,u=65535&e.high,A=e.low>>>16,h=0,l=0,p=0,d=0;return p+=(d+=s+(65535&e.low))>>>16,l+=(p+=o+A)>>>16,h+=(l+=r+u)>>>16,h+=t+c,i((p&=65535)<<16|(d&=65535),(h&=65535)<<16|(l&=65535),this.unsigned)},k.subtract=function(e){return n(e)||(e=a(e)),this.add(e.neg())},k.sub=k.subtract,k.multiply=function(e){if(this.isZero())return m;if(n(e)||(e=a(e)),c)return i(c.mul(this.low,this.high,e.low,e.high),c.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(B))return e.isOdd()?B:m;if(e.eq(B))return this.isOdd()?B:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(f)&&e.lt(f))return o(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,s=this.low>>>16,u=65535&this.low,A=e.high>>>16,h=65535&e.high,l=e.low>>>16,p=65535&e.low,d=0,g=0,b=0,w=0;return b+=(w+=u*p)>>>16,g+=(b+=s*p)>>>16,b&=65535,g+=(b+=u*l)>>>16,d+=(g+=r*p)>>>16,g&=65535,d+=(g+=s*l)>>>16,g&=65535,d+=(g+=u*h)>>>16,d+=t*p+r*l+s*h+u*A,i((b&=65535)<<16|(w&=65535),(d&=65535)<<16|(g&=65535),this.unsigned)},k.mul=k.multiply,k.divide=function(e){if(n(e)||(e=a(e)),e.isZero())throw Error("division by zero");var t,r,s;if(c)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?i((this.unsigned?c.div_u:c.div_s)(this.low,this.high,e.low,e.high),c.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return w;s=g}else{if(this.eq(B))return e.eq(b)||e.eq(v)?B:e.eq(B)?b:(t=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?b:v:(r=this.sub(e.mul(t)),s=t.add(r.div(e)));if(e.eq(B))return this.unsigned?g:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=m}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var u=Math.ceil(Math.log(t)/Math.LN2),A=48>=u?1:h(2,u-48),l=o(t),p=l.mul(e);p.isNegative()||p.gt(r);)p=(l=o(t-=A,this.unsigned)).mul(e);l.isZero()&&(l=b),s=s.add(l),r=r.sub(p)}return s},k.div=k.divide,k.modulo=function(e){return n(e)||(e=a(e)),c?i((this.unsigned?c.rem_u:c.rem_s)(this.low,this.high,e.low,e.high),c.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},k.mod=k.modulo,k.rem=k.modulo,k.not=function(){return i(~this.low,~this.high,this.unsigned)},k.and=function(e){return n(e)||(e=a(e)),i(this.low&e.low,this.high&e.high,this.unsigned)},k.or=function(e){return n(e)||(e=a(e)),i(this.low|e.low,this.high|e.high,this.unsigned)},k.xor=function(e){return n(e)||(e=a(e)),i(this.low^e.low,this.high^e.high,this.unsigned)},k.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?i(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):i(0,this.low<<e-32,this.unsigned)},k.shl=k.shiftLeft,k.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?i(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):i(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},k.shr=k.shiftRight,k.shiftRightUnsigned=function(e){if(n(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return 32>e?i(this.low>>>e|t<<32-e,t>>>e,this.unsigned):i(32===e?t:t>>>e-32,0,this.unsigned)},k.shru=k.shiftRightUnsigned,k.shr_u=k.shiftRightUnsigned,k.toSigned=function(){return this.unsigned?i(this.low,this.high,!1):this},k.toUnsigned=function(){return this.unsigned?this:i(this.low,this.high,!0)},k.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},k.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,255&t>>>8,255&t>>>16,t>>>24,255&e,255&e>>>8,255&e>>>16,e>>>24]},k.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,255&e>>>16,255&e>>>8,255&e,t>>>24,255&t>>>16,255&t>>>8,255&t]},t.fromBytes=function(e,n,r){return r?t.fromBytesLE(e,n):t.fromBytesBE(e,n)},t.fromBytesLE=function(e,n){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)},t.fromBytesBE=function(e,n){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)}},function(e){e.exports=require("zlib")},function(e,t,n){const r=n(24),o=n(0),i={netease:n(25),qq:n(26),xiami:n(27),baidu:n(28),kugou:n(29),kuwo:n(30),migu:n(31),joox:n(32),youtube:n(33)},s=e=>{const t={size:0,br:null,url:null,md5:null};return Promise.race([o("GET",e,{range:"bytes=0-8191"}),new Promise((e,t)=>setTimeout(()=>t(504),5e3))]).then(n=>n.statusCode.toString().startsWith("2")?(e.includes("qq.com")?t.md5=n.headers["server-md5"]:(e.includes("xiami.net")||e.includes("qianqian.com"))&&(t.md5=n.headers.etag.replace(/"/g,"").toLowerCase()),t.size=parseInt((n.headers["content-range"]||"").split("/").pop()||n.headers["content-length"])||0,t.url=n.url.href,"8192"===n.headers["content-length"]?n.body(!0):Promise.reject()):Promise.reject()).then(e=>{const n=a(e);t.br=n&&!isNaN(n)?1e3*n:null}).catch(()=>{}).then(()=>t)},a=e=>{const t={2:{2:["free",8,16,24,32,40,48,56,64,80,96,112,128,144,160,"bad"],3:["free",32,48,56,64,80,96,112,128,144,160,176,192,224,256,"bad"]},3:{1:["free",32,40,48,56,64,80,96,112,128,160,192,224,256,320,"bad"],2:["free",32,48,56,64,80,96,112,128,160,192,224,256,320,384,"bad"],3:["free",32,64,96,128,160,192,224,256,288,320,352,384,416,448,"bad"]}};t[2][1]=t[2][2],t[0]=t[2];let n=0;if("fLaC"===e.slice(0,4).toString())return 999;if("ID3"===e.slice(0,3).toString()){n=6;n=10+e.slice(n,n+4).reduce((e,t,n)=>e+(127&t)<<7*(3-n),0)}const r=e.slice(n,n+4);if(4===r.length&&255===r[0]&&7==(7&r[1]>>5)&&0!=(3&r[1]>>1)&&15!=(15&r[2]>>4)&&3!=(3&r[2]>>2)){const e=3&r[1]>>3,n=3&r[1]>>1,o=r[2]>>4;return t[e][n][o]}};e.exports=(e,t)=>{let n={};const o=(t||global.source||["qq","kuwo","migu"]).filter(e=>e in i);return r(e).then(e=>(n=e,Promise.all(o.map(t=>i[t].check(e).catch(()=>{}))))).then(e=>(e=e.filter(e=>e),Promise.all(e.map(e=>s(e))))).then(e=>(e=e.filter(e=>e.url)).length?(console.log(`[${n.id}] ${n.name}\n${e[0].url}`),e[0]):Promise.reject())}},function(e,t,n){const r=n(1),o=n(0),i=(e,t)=>Object.keys(e).reduce((n,r)=>Object.assign(n,t.includes(r)&&{[r]:e[r]}),{}),s=e=>{const t=[e[0]];return e.slice(1).some(e=>!!(15<t.reduce((e,t)=>e+t.length,0))||(t.push(e),!1)),t},a=e=>o("GET","https://music.163.com/api/song/detail?ids=["+e+"]").then(e=>e.json()).then(e=>{const t=i(e.songs[0],["id","name","alias","duration"]);return t.name=(t.name||"").replace(/（\s*cover[:：\s][^）]+）/i,"").replace(/\(\s*cover[:：\s][^\)]+\)/i,"").replace(/（\s*翻自[:：\s][^）]+）/,"").replace(/\(\s*翻自[:：\s][^\)]+\)/,""),t.album=i(e.songs[0].album,["id","name"]),t.artists=e.songs[0].artists.map(e=>i(e,["id","name"])),t.keyword=t.name+" - "+s(t.artists.map(e=>e.name)).join(" / "),t.name?t:Promise.reject()});e.exports=e=>r(a,e)},function(e,t,n){const r=n(1),o=n(3),i=n(0),s=e=>{const t="http://music.163.com/api/album/"+e.album.id;return i("GET",t).then(e=>e.body()).then(t=>{const n=JSON.parse(t.replace(/"dfsId":(\d+)/g,'"dfsId":"$1"')).album.songs.find(t=>t.id===e.id);return n?n.hMusic.dfsId||n.mMusic.dfsId||n.lMusic.dfsId:Promise.reject()})},a=e=>e&&"0"!==e?o.uri.retrieve(e):Promise.reject();e.exports={check:e=>r(s,e).then(a)}},function(e,t,n){const r=n(1),o=n(4),i=n(5),s=n(0),a={origin:"http://y.qq.com/",referer:"http://y.qq.com/",cookie:process.env.QQ_COOKIE||null},c=e=>({id:{song:e.mid,file:e.file.media_mid},name:e.name,duration:1e3*e.interval,album:{id:e.album.mid,name:e.album.name},artists:e.singer.map(({mid:e,name:t})=>({id:e,name:t}))}),u=e=>{const t="https://c.y.qq.com/soso/fcgi-bin/client_search_cp?ct=24&qqmusic_ver=1298&new_json=1&remoteplace=txt.yqq.center&searchid=46804741196796149&t=0&aggr=1&cr=1&catZhida=1&lossless=0&flag_qc=0&p=1&n=20&w="+encodeURIComponent(e.keyword)+"&g_tk=5381&jsonpCallback=MusicJsonCallback10005317669353331&loginUin=0&hostUin=0&format=jsonp&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq&needNewCode=0";return s("GET",t).then(e=>e.jsonp()).then(t=>{const n=t.data.song.list.map(c),r=i(n,e);return r?r.id:Promise.reject()})},A=e=>(e.key=e.file,Promise.all([["F000",".flac"],["M800",".mp3"],["M500",".mp3"]].slice(a.cookie||"undefined"!=typeof window?i.ENABLE_FLAC?0:1:2).map(t=>((e,t)=>{const n=((a.cookie||"").match(/uin=(\d+)/)||[])[1]||"0",r="https://u.y.qq.com/cgi-bin/musicu.fcg?data="+encodeURIComponent(JSON.stringify({req_0:{module:"vkey.GetVkeyServer",method:"CgiGetVkey",param:{guid:"7332953645",loginflag:1,filename:[t.join(e.file)],songmid:[e.song],songtype:[0],uin:n,platform:"20"}}}));return s("GET",r,a).then(e=>e.json()).then(e=>{const{sip:t,midurlinfo:n}=e.req_0.data;return n[0].purl?t[0]+n[0].purl:Promise.reject()})})(e,t).catch(()=>null))).then(e=>e.find(e=>e)||Promise.reject()).catch(()=>o().qq.track(e)));e.exports={check:e=>r(u,e).then(A),track:A}},function(e,t,n){const r=n(1),o=n(4),i=n(5),s=(n(3),n(0)),a={referer:"https://h.xiami.com/"},c=e=>({id:e.song_id,name:e.song_name,album:{id:e.album_id,name:e.album_name},artists:[{id:e.artist_id,name:e.artist_name}]}),u=e=>{const t="http://api.xiami.com/web?v=2.0&app_key=1&key="+encodeURIComponent(e.keyword)+"&page=1&limit=20&callback=jsonp&r=search/songs";return s("GET",t,a).then(e=>e.jsonp()).then(t=>{const n=t.data.songs.map(c),r=i(n,e);return r?r.id:Promise.reject()})},A=e=>s("GET","https://api.xiami.com/web?v=2.0&app_key=1&id="+e+"&callback=jsonp&r=song/detail",a).then(e=>e.jsonp()).then(e=>e.data.song.listen_file||Promise.reject()).catch(()=>o().xiami.track(e));e.exports={check:e=>r(u,e).then(A),track:A}},function(e,t,n){const r=n(1),o=n(4),i=n(5),s=n(0),a=e=>{const t=e.all_artist_id.split(",");return{id:e.song_id,name:e.title,album:{id:e.album_id,name:e.album_title},artists:e.author.split(",").map((e,n)=>({id:t[n],name:e}))}},c=e=>{const t=`http://musicapi.taihe.com/v1/restserver/ting?from=qianqianmini&method=baidu.ting.search.merge&isNew=1&platform=darwin&page_no=1&page_size=30&query=${encodeURIComponent(e.keyword)}&version=11.2.1`;return s("GET",t).then(e=>e.json()).then(t=>{const n=t.result.song_info.song_list.map(a),r=i(n,e);return r?r.id:Promise.reject()})},u=e=>s("GET","http://music.taihe.com/data/music/fmlink?songIds="+e+"&type=mp3").then(e=>e.json()).then(e=>"songList"in e.data&&e.data.songList[0].songLink||Promise.reject()).catch(()=>o().baidu.track(e));e.exports={check:e=>r(c,e).then(u)}},function(e,t,n){const r=n(1),o=n(4),i=n(5),s=n(3),a=n(0),c=e=>{const t=e.SingerName.split("、");return{id:e.FileHash,name:e.SongName,duration:1e3*e.Duration,album:{id:e.AlbumID,name:e.AlbumName},artists:e.SingerId.map((e,n)=>({id:e,name:t[n]}))}},u=e=>{const t="http://songsearch.kugou.com/song_search_v2?keyword="+encodeURIComponent(e.keyword)+"&page=1";return a("GET",t).then(e=>e.json()).then(t=>{const n=t.data.lists.map(c),r=i(n,e);return r?r.id:Promise.reject()}).catch(()=>o().kugou.search(e))},A=e=>{const t="http://trackercdn.kugou.com/i/v2/?key="+s.md5.digest(e+"kgcloudv2")+"&hash="+e+"&br=hq&appid=1005&pid=2&cmd=25&behavior=play";return a("GET",t).then(e=>e.json()).then(e=>e.url[0]||Promise.reject())};e.exports={check:e=>r(u,e).then(A),search:u}},function(e,t,n){const r=n(1),o=n(4),i=n(5),s=n(3),a=n(0),c=e=>({id:e.musicrid.split("_").pop(),name:e.name,duration:1e3*e.songTimeMinutes.split(":").reduce((e,t)=>60*e+parseFloat(t),0),album:{id:e.albumid,name:e.album},artists:e.artist.split("&").map((t,n)=>({id:n?null:e.artistid,name:t}))}),u=e=>{const t=encodeURIComponent(e.keyword.replace(" - ","")),n=`http://www.kuwo.cn/api/www/search/searchMusicBykeyWord?key=${t}&pn=1&rn=30`;return a("GET","http://kuwo.cn/search/list?key="+t).then(e=>e.headers["set-cookie"].find(e=>e.includes("kw_token")).replace(/;.*/,"").split("=").pop()).then(e=>a("GET",n,{referer:"http://www.kuwo.cn/search/list?key="+t,csrf:e,cookie:"kw_token="+e})).then(e=>e.json()).then(t=>{const n=t.data.list.map(c),r=i(n,e);return r?r.id:Promise.reject()})},A=e=>{const t=s.kuwoapi?"http://mobi.kuwo.cn/mobi.s?f=kuwo&q="+s.kuwoapi.encryptQuery("corp=kuwo&p2p=1&type=convert_url2&sig=0&format="+["flac","mp3"].slice(i.ENABLE_FLAC?0:1).join("|")+"&rid="+e):"http://antiserver.kuwo.cn/anti.s?type=convert_url&format=mp3&response=url&rid=MUSIC_"+e;return a("GET",t,{"user-agent":"okhttp/3.10.0"}).then(e=>e.body()).then(e=>(e.match(/http[^\s$"]+/)||[])[0]||Promise.reject()).catch(()=>o().kuwo.track(e))};e.exports={check:e=>r(u,e).then(A),track:A}},function(e,t,n){const r=n(1),o=n(4),i=n(5),s=n(3),a=n(0),c={origin:"http://music.migu.cn/",referer:"http://music.migu.cn/"},u=e=>{const t=e.singerId.split(/\s*,\s*/),n=e.singerName.split(/\s*,\s*/);return{id:e.copyrightId,name:e.title,album:{id:e.albumId,name:e.albumName},artists:t.map((e,t)=>({id:e,name:n[t]}))}},A=e=>{const t="http://m.music.migu.cn/migu/remoting/scr_search_tag?keyword="+encodeURIComponent(e.keyword)+"&type=2&rows=20&pgc=1";return a("GET",t).then(e=>e.json()).then(t=>{const n=((t||{}).musics||[]).map(u),r=i(n,e);return r?r.id:Promise.reject()})},h=e=>Promise.all([3,2,1].slice(i.ENABLE_FLAC?0:1).map(t=>((e,t)=>{const n="http://music.migu.cn/v3/api/music/audioPlayer/getPlayInfo?dataType=2&"+s.miguapi.encryptBody({copyrightId:e.toString(),type:t});return a("GET",n,c).then(e=>e.json()).then(e=>{const{playUrl:t}=e.data;return t?encodeURI(t):Promise.reject()})})(e,t).catch(()=>null))).then(e=>e.find(e=>e)||Promise.reject()).catch(()=>o().migu.track(e));e.exports={check:e=>r(A,e).then(h),track:h}},function(e,t,n){const r=n(1),o=n(4),i=n(5),s=n(3),a=n(0),c={origin:"http://www.joox.com",referer:"http://www.joox.com"},u=e=>{const{decode:t}=s.base64;return{id:e.songid,name:t(e.info1||""),duration:1e3*e.playtime,album:{id:e.albummid,name:t(e.info3||"")},artists:e.singer_list.map(({id:e,name:n})=>({id:e,name:t(n||"")}))}},A=e=>{const t=(e=>/[\u0800-\u4e00]/.test(e.name)?e.name:e.keyword)(e),n="http://api-jooxtt.sanook.com/web-fcgi-bin/web_search?country=hk&lang=zh_TW&search_input="+encodeURIComponent(t)+"&sin=0&ein=30";return a("GET",n,c).then(e=>e.body()).then(t=>{const n=JSON.parse(t.replace(/'/g,'"')).itemlist.map(u),r=i(n,e);return r?r.id:Promise.reject()})},h=e=>{const t="http://api.joox.com/web-fcgi-bin/web_get_songinfo?songid="+e+"&country=hk&lang=zh_cn&from_type=-1&channel_id=-1&_="+(new Date).getTime();return a("GET",t,c).then(e=>e.jsonp()).then(e=>{const t=(e.r320Url||e.r192Url||e.mp3Url||e.m4aUrl).replace(/M\d00([\w]+).mp3/,"M800$1.mp3");return t||Promise.reject()}).catch(()=>o().joox.track(e))};e.exports={check:e=>r(A,e).then(h),track:h}},function(e,t,n){const r=n(1),o=n(0),i=e=>(e||"").split("&").reduce((e,t)=>(t=t.split("=").map(decodeURIComponent),Object.assign({},e,{[t[0]]:t[1]})),{}),s=void 0,a=process.env.YOUTUBE_KEY||null,c=(e="-tKVN2mAKRI")=>o("GET","https://www.youtube.com/watch?v="+e,{},null,s).then(e=>e.body()).then(e=>{let t=/"assets":{[^}]+}/.exec(e)[0];return t=JSON.parse(`{${t}}`).assets,o("GET","https://youtube.com"+t.js,{},null,s).then(e=>e.body())}).then(e=>{const[t,n,r]=/function\((\w+)\)\s*{([^}]+split\(""\)[^}]+join\(""\))};/.exec(e),o=/;(.+?)\..+?\(/.exec(r)[1],i=new RegExp(`var ${o}={[\\s\\S]+?};`).exec(e)[0];return new Function([n],i+"\n"+r)}),u=e=>{const t=`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(e.keyword)}&type=video&key=${a}`;return o("GET",t,{accept:"application/json"},null,s).then(e=>e.json()).then(e=>{const t=e.items[0];return t?t.id.videoId:Promise.reject()})},A=e=>{const t="https://www.youtube.com/results?search_query="+encodeURIComponent(e.keyword);return o("GET",t,{},null,s).then(e=>e.body()).then(e=>{const t=JSON.parse(e.match(/window\["ytInitialData"\]\s*=\s*([^;]+);/)[1]).contents.twoColumnSearchResultsRenderer.primaryContents.sectionListRenderer.contents[0].itemSectionRenderer.contents[0];return t?t.videoRenderer.videoId:Promise.reject()})},h=e=>o("GET",`https://www.youtube.com/get_video_info?video_id=${e}&el=detailpage`,{},null,s).then(e=>e.body()).then(e=>JSON.parse(i(e).player_response).streamingData).then(e=>{const t=e.formats.concat(e.adaptiveFormats).find(e=>140===e.itag),n=i(t.cipher);return t.url||(n.sp.includes("sig")?r(c,void 0,864e5).then(e=>n.url+"&sig="+e(n.s)):n.url)});e.exports={check:e=>r(a?u:A,e).then(h),track:h}},function(e,t,n){const r=n(7),o=n(11),i=n(8),s=n(6).parse,a=n(35),c=n(12),u=n(0),A={core:{mitm:(e,t)=>{if("/proxy.pac"==e.url){const n=s("http://"+e.headers.host);t.writeHead(200,{"Content-Type":"application/x-ns-proxy-autoconfig"}),t.end(`\n\t\t\t\t\tfunction FindProxyForURL(url, host) {\n\t\t\t\t\t\tif (${Array.from(c.target.host).map(e=>`host == '${e}'`).join(" || ")}) {\n\t\t\t\t\t\t\treturn 'PROXY ${n.hostname}:${n.port||80}'\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 'DIRECT'\n\t\t\t\t\t}\n\t\t\t\t`)}else{const n={res:t,req:e};Promise.resolve().then(()=>A.protect(n)).then(()=>A.authenticate(n)).then(()=>c.request.before(n)).then(()=>A.filter(n)).then(()=>A.log(n)).then(()=>A.mitm.request(n)).then(()=>c.request.after(n)).then(()=>A.mitm.response(n)).catch(()=>A.mitm.close(n))}},tunnel:(e,t,n)=>{const r={req:e,socket:t,head:n};Promise.resolve().then(()=>A.protect(r)).then(()=>A.authenticate(r)).then(()=>c.connect.before(r)).then(()=>A.filter(r)).then(()=>A.log(r)).then(()=>A.tunnel.connect(r)).then(()=>A.tunnel.dock(r)).then(()=>c.negotiate.before(r)).then(()=>A.tunnel.pipe(r)).catch(()=>A.tunnel.close(r))}},abort:e=>{e&&e.end(),e&&!e.destroyed&&e.destroy()},protect:e=>{const{req:t,res:n,socket:r}=e;t&&t.on("error",()=>A.abort(t.socket,"req")),n&&n.on("error",()=>A.abort(n.socket,"res")),r&&r.on("error",()=>A.abort(r,"socket"))},log:e=>{const{req:t,socket:n,decision:r}=e,o={close:"|",blank:"-",proxy:">"}[r]||">";n?console.log("TUNNEL",o,t.url):console.log("MITM",o,s(t.url).host,t.socket.encrypted?"(ssl)":"")},authenticate:e=>{const{req:t,res:n,socket:r}=e,o=Buffer.from((t.headers["proxy-authorization"]||"").split(/\s+/).pop()||"","base64").toString();if("proxy-authorization"in t.headers&&delete t.headers["proxy-authorization"],l.authentication&&o!=l.authentication&&(r||t.url.startsWith("http://")))return r?r.write('HTTP/1.1 407 Proxy Auth Required\r\nProxy-Authenticate: Basic realm="realm"\r\n\r\n'):n.writeHead(407,{"proxy-authenticate":'Basic realm="realm"'}),Promise.reject(e.error="authenticate")},filter:e=>{if(e.decision||e.req.local)return;const t=s((e.socket?"https://":"")+e.req.url),n=e=>-1!=t.href.search(new RegExp(e,"g"));try{const t=l.whitelist.some(n),r=l.blacklist.some(n);if(!t&&r)return Promise.reject(e.error="filter")}catch(t){e.error=t}},mitm:{request:e=>new Promise((t,n)=>{if("close"===e.decision)return n(e.error=e.decision);const{req:r}=e,o=s(r.url),i=u.configure(r.method,o,r.headers);e.proxyReq=u.create(o)(i).on("response",n=>t(e.proxyRes=n)).on("error",t=>n(e.error=t)),r.readable?r.pipe(e.proxyReq):e.proxyReq.end(r.body)}),response:e=>{const{res:t,proxyRes:n}=e;n.on("error",()=>A.abort(n.socket,"proxyRes")),t.writeHead(n.statusCode,n.headers),n.readable?n.pipe(t):t.end(n.body)},close:e=>{A.abort(e.res.socket,"mitm")}},tunnel:{connect:e=>new Promise((t,n)=>{if("close"===e.decision)return n(e.error=e.decision);const{req:r}=e,i=s("https://"+r.url);if(global.proxy&&!r.local){const o=u.configure(r.method,i,r.headers);u.create(A)(o).on("connect",(n,r)=>t(e.proxySocket=r)).on("error",t=>n(e.error=t)).end()}else{const r=o.connect(i.port||443,u.translate(i.hostname)).on("connect",()=>t(e.proxySocket=r)).on("error",t=>n(e.error=t))}}),dock:e=>new Promise(t=>{const{req:n,head:r,socket:o}=e;o.once("data",n=>t(e.head=Buffer.concat([r,n]))).write(`HTTP/${n.httpVersion} 200 Connection established\r\n\r\n`)}).then(t=>e.socket.sni=a(t)).catch(()=>{}),pipe:e=>{if("blank"===e.decision)return Promise.reject(e.error=e.decision);const{head:t,socket:n,proxySocket:r}=e;r.on("error",()=>A.abort(e.proxySocket,"proxySocket")),r.write(t),n.pipe(r),r.pipe(n)},close:e=>{A.abort(e.socket,"tunnel")}}},h={key:r.readFileSync(i.join(__static,"server","server.key")),cert:r.readFileSync(i.join(__static,"server","server.crt"))},l={http:n(14).createServer().on("request",A.core.mitm).on("connect",A.core.tunnel),https:n(15).createServer(h).on("request",A.core.mitm).on("connect",A.core.tunnel),whitelist:[],blacklist:["://127\\.\\d+\\.\\d+\\.\\d+","://localhost"],authentication:null};e.exports=l},function(e){e.exports=e=>{let t=e.length,n=43;const r=(e=n)=>isNaN(e);if(n+1>t||r())return null;if(n+=1+e[n],n+2>t||r())return null;if(n+=2+e.readInt16BE(n),n+1>t||r())return null;if(n+=1+e[n],n+2>t||r())return null;const o=e.readInt16BE(n);n+=2;const i=n+o;if(i>t||r(i))return null;for(t=i;n+4<=t||r();){const o=e.readInt16BE(n),i=e.readInt16BE(n+2);if(n+=4,0!==o){n+=i;continue}if(n+2>t||r())return null;const s=e.readInt16BE(n);if(n+=2,n+s>t)return null;for(;n+3<=t||r();){const o=e[n],i=e.readInt16BE(n+1);if(n+=3,0===o)return n+i>t||r()?null:e.toString("ascii",n,n+i);n+=i}}return null}},function(e,t,n){"use strict";function r(){d.lookup("music.163.com",(function(e,t){null!==e?console.log("dns error: "+e):(console.log("music.163.com ip is "+t),i(!0),function(e,t){const r={port:e,forceHost:t};if(global.address=r.address,r.port=(r.port||"8080").split(":").map(e=>parseInt(e)),r.port.some(e=>isNaN(e)||1>e||65535<e)&&(console.log("Port must be a number higher than 0 and lower than 65535."),process.exit(1)),r.proxyUrl&&!/http(s?):\/\/.+:\d+/.test(r.proxyUrl)&&(console.log("Please check the proxy url."),process.exit(1)),r.endpoint&&!/http(s?):\/\/.+/.test(r.endpoint)&&(console.log("Please check the endpoint host."),process.exit(1)),r.forceHost&&0===n(11).isIP(r.forceHost)&&(console.log("Please check the server host."),process.exit(1)),r.matchOrder){const e=new Set(["netease","qq","xiami","baidu","kugou","kuwo","migu","joox","youtube"]),t=r.matchOrder;t.some((e,n)=>n!=t.indexOf(e))?(console.log("Please check the duplication in match order."),process.exit(1)):t.some(t=>!e.has(t))&&(console.log("Please check the availability of match sources."),process.exit(1)),global.source=t}r.token&&!/\S+:\S+/.test(r.token)&&(console.log("Please check the authentication token."),process.exit(1));const o=n(6).parse,i=n(12),s=n(34),a=e=>e[Math.floor(Math.random()*e.length)],c=Array.from(i.target.host);global.port=r.port,global.proxy=r.proxyUrl?o(r.proxyUrl):null,global.hosts=c.reduce((e,t)=>Object.assign(e,{[t]:r.forceHost}),{}),s.whitelist=["://[\\w.]*music\\.126\\.net","://[\\w.]*vod\\.126\\.net"],r.strict&&s.blacklist.push(".*"),s.authentication=r.token||null,global.endpoint=r.endpoint,r.endpoint&&s.whitelist.push(escape(r.endpoint)),hosts["music.httpdns.c.163.com"]=a(["59.111.181.35","59.111.181.38"]),hosts["httpdns.n.netease.com"]=a(["59.111.179.213","59.111.179.214"]),Promise.all([e=>n(0)("POST","https://music.httpdns.c.163.com/d",{},e).then(e=>e.json()).then(e=>e.dns.reduce((e,t)=>e.concat(t.ips),[])),e=>n(0)("GET","https://httpdns.n.netease.com/httpdns/v2/d?domain="+e).then(e=>e.json()).then(e=>Object.keys(e.data).map(t=>e.data[t]).reduce((e,t)=>e.concat(t.ip||[]),[]))].map(e=>e(c.join(","))).concat(c.map(e=>new Promise((t,r)=>n(16).lookup(e,{all:!0},(e,n)=>e?r(e):t(n.map(e=>e.address))))))).then(e=>{const{host:t}=i.target;e.forEach(e=>e.forEach(t.add,t)),s.whitelist=s.whitelist.concat(Array.from(t).map(escape));const n=e=>console.log(`${["HTTP","HTTPS"][e]} Server running @ http://${address||"0.0.0.0"}:${port[e]}`);port[0]&&s.http.listen(port[0],address).once("listening",()=>n(0)),port[1]&&s.https.listen(port[1],address).once("listening",()=>n(1))}).catch(e=>console.log(e))}("80:443",t))}))}function o(){i(!1),console.log("关闭成功")}function i(e){try{let t=p.readFileSync("/private/etc/hosts");if(e){if(!t.includes(l)){s(t.toString()+l)}}else if(t.includes(l)){s(t.toString().split(l).join(""))}return!0}catch(e){return console.log("权限不够 请使用sudo node music.js"),!1}}async function s(e){h.a.exec(`echo -n '${e.trim()}' > /private/etc/hosts`,{name:"Music"},(function(e,t){e?console.log(e):console.log(t)}))}function a(){(f=new u.BrowserWindow({show:!1,width:64,height:64,frame:!1,fullscreenable:!1,skipTaskbar:!0,resizable:!1,transparent:!0,webPreferences:{backgroundThrottling:!1,nodeIntegration:!0,nodeIntegrationInWorker:!0}})).loadURL(m),f.on("closed",(function(){f=null}));var e=new u.Tray("".concat(__static,"/icon/music_iconTemplate.png"));e.on("right-click",(function(){e.popUpContextMenu(u.Menu.buildFromTemplate(c()))})),e.on("click",(function(){e.popUpContextMenu(u.Menu.buildFromTemplate(c()))}))}function c(){return[{label:"状态：".concat(g?"运行中":"已停止"),enabled:!1},{label:"".concat(g?"停止":"启动"),click:function(){console.log(p.readFileSync("/private/etc/hosts").includes(l)),g?o():r(),g=!g}},{label:"退出",role:"quit"}]}n.r(t);var u=n(2),A=n(17),h=n.n(A);const l="\n# music start\n127.0.0.1 music.163.com\n127.0.0.1 interface.music.163.com\n# music end",p=n(7),d=(n(9).spawn,n(16));global.__static=n(8).join(__dirname,"/static").replace(/\\/g,"\\\\");var f,m="file://".concat(__dirname,"/index.html"),g=!1;o(),u.app.on("ready",a),u.app.on("window-all-closed",(function(){"darwin"!==process.platform&&u.app.quit()})),u.app.on("activate",(function(){null===f&&a()})),u.app.on("before-quit",(function(){o()}))}]);